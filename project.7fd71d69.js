const t="https://682364aa65ba058033969579.mockapi.io/api";async function e(){try{let e=await fetch(`${t}?embed=comments`);return await e.json()}catch(t){return console.error("Помилка завантаження постів:",t),[]}}async function n(e,n){try{await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:n,comments:[]})})}catch(t){console.error("Помилка створення поста:",t)}}async function a(e,n,a){try{await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,content:a})})}catch(t){console.error("Помилка оновлення поста:",t)}}async function o(e){try{await fetch(`${t}/${e}`,{method:"DELETE"})}catch(t){console.error("Помилка видалення поста:",t)}}async function c(e,n){try{let a=await fetch(`${t}/${e}`).then(t=>t.json());a.comments.push(n),await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(t){console.error("Помилка додавання коментаря:",t)}}function i(t){console.log(t);let e=document.getElementById("postsContainer"),n=document.getElementById("post-template").innerHTML;e.innerHTML=Handlebars.compile(n)({posts:t})}const s=document.getElementById("createPostForm");document.getElementById("postsContainer"),container.innerHTML="",s.addEventListener("submit",async t=>{t.preventDefault();let a=document.getElementById("titleInput").value,o=document.getElementById("contentInput").value;await n(a,o),i(await e())}),document.addEventListener("click",async t=>{if(t.target.classList.contains("editPostButton")){let n=t.target.dataset.id,o=prompt("Новий заголовок:"),c=prompt("Новий зміст:");o&&c&&(await a(n,o,c),i(await e()))}if(t.target.classList.contains("deletePostButton")){let n=t.target.dataset.id;await o(n),i(await e())}}),document.addEventListener("submit",async t=>{if(t.target.classList.contains("createCommentForm")){t.preventDefault();let n=t.target.querySelector(".commentInput"),a=t.target.closest(".post").dataset.id,o=n.value;await c(a,o),i(await e())}}),async function(){i(await e())}();
//# sourceMappingURL=project.7fd71d69.js.map
