const t="https://682364aa65ba058033969579.mockapi.io/api";async function e(){try{let e=await fetch(`${t}/posts`),a=await fetch(`${t}/comments`),n=await e.json(),o=await a.json();return n.map(t=>({...t,comments:o.filter(e=>e.postId===t.id)}))}catch(t){return console.error("Помилка завантаження постів:",t),[]}}async function a(e,a){try{await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:a,comments:[]})})}catch(t){console.error("Помилка створення поста:",t)}}async function n(e,a,n){try{await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,content:n})})}catch(t){console.error("Помилка оновлення поста:",t)}}async function o(e){try{await fetch(`${t}/${e}`,{method:"DELETE"})}catch(t){console.error("Помилка видалення поста:",t)}}async function s(t,e){try{await fetch("https://682364aa65ba058033969579.mockapi.io/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t,text:e})})}catch(t){console.error("Помилка додавання коментаря:",t)}}const i=t=>{document.querySelector(".posts_container").innerHTML=t.map(t=>`
    <div class="post" data-id="${t.id}">
      <h2 class="post-title">${t.title}</h2>
      <p class="post-description">${t.description}</p>
      <button class="editPostButton" data-id="${t.id}">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438}</button>
      <button class="deletePostButton" data-id="${t.id}">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438}</button>
      <form class="createCommentForm">
        <input type="text" class="commentInput" placeholder="\u{41A}\u{43E}\u{43C}\u{435}\u{43D}\u{442}\u{430}\u{440}" required />
        <button type="submit">\u{414}\u{43E}\u{434}\u{430}\u{442}\u{438} \u{43A}\u{43E}\u{43C}\u{435}\u{43D}\u{442}\u{430}\u{440}</button>
      </form>
    </div>
  `).join("")},c=document.getElementById("createPostForm");document.getElementById("postsContainer"),c.addEventListener("submit",async t=>{t.preventDefault();let n=document.getElementById("titleInput").value,o=document.getElementById("contentInput").value;await a(n,o),i(await e())}),document.addEventListener("click",async t=>{if(t.target.classList.contains("editPostButton")){let a=t.target.dataset.id,o=prompt("Новий заголовок:"),s=prompt("Новий зміст:");o&&s&&(await n(a,o,s),i(await e()))}if(t.target.classList.contains("deletePostButton")){let a=t.target.dataset.id;await o(a),i(await e())}}),document.addEventListener("submit",async t=>{if(t.target.classList.contains("createCommentForm")){t.preventDefault();let a=t.target.querySelector(".commentInput"),n=t.target.closest(".post").dataset.id,o=a.value;await s(n,o),i(await e())}}),async function(){i(await e())}();
//# sourceMappingURL=project.4d8df9e2.js.map
